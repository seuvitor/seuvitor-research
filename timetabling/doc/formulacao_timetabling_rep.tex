\documentclass{article}

\usepackage[brazil]{babel}
\usepackage[latin1]{inputenc}

\begin{document}

\section{Entradas}
\begin{itemize}
\item Conjuntos $S$ de estudantes, $E$ de eventos, $T$ de períodos e $R$ de salas.
\item $E^s$ são os eventos em que o estudante $s$ está matriculado.
\item $S^e$ são os estudantes matriculados no evento $e$.
\item $E^t$ são os eventos viáveis para o período $t$.
\item $T^e$ são os períodos viáveis para o evento $e$.
\item $E^r$ são os eventos viáveis para a sala $r$.
\item $R^e$ são as salas viáveis para o evento $e$.
\item $\gamma(t)$ são os 3 (ou menos) períodos consecutivos a partir de $t$.
\item $\delta(t)$ são os 8 outros períodos no mesmo dia de $t$.
\end{itemize}

\section{Variáveis}
\subsection{Variáveis referentes à clusterização dos eventos}
\begin{itemize}
\item $x_{uv} \in \{0,1\}$ evento $u$ representa $v$.
\end{itemize}
\subsection{Variáveis referentes à alocação dos eventos em salas}
\begin{itemize}
\item $y_{uvr} \in \{0,1\}$ evento $u$ representa $v$ e ocorre na sala $r$.
\end{itemize}
\subsection{Variáveis referentes à alocação dos eventos em períodos}
\begin{itemize}
\item $p_{ut} \in \{0,1\}$ evento $u$ representa o período $t$.
\item $q_{vt} \in \{0,1\}$ evento $v$ ocorre no período $t$.
\end{itemize}
\subsection{Variáveis referentes a padrões nas agendas dos estudantes}
\begin{itemize}
\item $o_{st} \in \{0,1\}$ estudante $s$ tem 3 eventos consecutivos a partir do período $t$.
\item $w_{st} \in \{0,1\}$ estudante $s$ tem 1 evento no período $t$ que é o único do dia.
\item $\alpha_{st} \in [0,2]$ variável de folga relacionada com $f_{st}$.
\item $\beta_{st} \in [-8,0]$ variável de folga relacionada com $g_{st}$.
\end{itemize}

\section{Objetivo}
O custo de uma solução é a soma das penalidades relacionadas com cada estudante. Para cada estudante, penalizamos:
\begin{itemize}
\item Cada alocação ao último período do dia
\item Cada alocação a 3 períodos consecutivos
\item Cada alocação a um único período do dia
\end{itemize}
\begin{equation}
\min z = \sum_{s \in S}{ \left( \left( \sum_{v \in E^s}{ \sum_{t \in T^e \cap \{9, 18, 27, 36, 45\}}{ q_{vt} } } \right) + \sum_{t \in T}{ o_{st} } + \sum_{t \in T}{ w_{st} } \right) }
\end{equation}

\section{Restrições}
$\bar{N}[u]$ é a anti-adjacência de $u$, mais $u$. $A[S]$ é o conjunto de arestas em $S$.

\subsection{Restrições para clusterização dos eventos}
\begin{itemize}
\item todo evento $v$ deve ter um representante $u$.
\begin{equation}
\sum_{u \in \bar{N}[v]}{ x_{uv}} \geq 1 \qquad \forall v \in E
\end{equation}
\item somente um dentre dois eventos $v$ e $w$ em conflito pode ser representado por $u$.
\begin{equation}
x_{uv} + x_{uw} \leq x_{uu} \qquad \forall u \in E, vw \in A[\bar{N}(u)]
\end{equation}
\end{itemize}

\subsection{Restrições para alocação dos eventos em salas}
\begin{itemize}
\item se $u$ representa $v$, então $v$ ocorre em alguma sala $r \in R^v$.
\begin{equation}
\sum_{r \in R^v}{y_{uvr}} = x_{uv} \qquad \forall u \in E, v \in \bar{N}[u]
\end{equation}
\item no máximo um evento $v$ representado por $u$ pode ocorrer na sala $r$.
\begin{equation}
\sum_{v \in E^r}{y_{uvr}} \leq 1 \qquad \forall u \in E, r \in R
\end{equation}
\end{itemize}

\subsection{Restrições para alocação dos eventos em períodos}
\begin{itemize}
\item se o evento $u$ é representante, ele representa exatamente um período $t$.
\begin{equation}
\sum_{t \in T^u}{ p_{ut} } = x_{uu} \qquad \forall u \in E
\end{equation}
\item o período $t$ pode ser representado por no máximo um evento representante $u$.
\begin{equation}
\sum_{u \in E^t}{ p_{ut} } \leq 1 \qquad \forall t \in T
\end{equation}
\item um evento $v$ deve ocorrer em exatamente um período $t$.
\begin{equation}
\sum_{t \in T^v}{ q_{vt} } = 1 \qquad \forall v \in E
\end{equation}
\item se $u$ representa $v$ e representa o período $t$, então $v$ deve ocorrer em $t$.
\begin{equation}
x_{uv} + p_{ut} - q_{vt} \leq 1 \qquad \forall u \in E, v \in \bar{N}[u], t \in T^u \cap T^v
\end{equation}
\item se $u$ representa o período $t \notin T^v$, então $u$ não pode representar $v$.
\begin{equation}
x_{uv} + p_{ut} \leq 1 \qquad \forall u \in E, v \in \bar{N}[u], t \in T^u \setminus T^v
\end{equation}
\item se $v$ precede $w$, e ocorre no período $t$, então $w$ não ocorre em $k \leq t$.
\begin{equation}
\sum_{k \in T^w, k \leq t}{ q_{wk} } \leq 1 - q_{vt} \qquad \forall v, w \in E, Prec(v, w), t \in T^v
\end{equation}

\end{itemize}

\subsection{Restrições para identificação de padrões nas agendas dos estudantes}
\begin{itemize}
\item Se o estudante $s$ está alocado para os 3 períodos consecutivos $k \in \gamma(t)$, o lado esquerdo é 3, logo $o_{st} = 1$.
\begin{equation}
\sum_{k \in \gamma(t)}{ \sum_{v \in E^s \cap E^k}{ q_{vk} } } = o_{st} + \alpha_{st} \qquad \forall s \in S, t \in T
\end{equation}
\item Se o estudante $s$ está alocado para o período $t$ e para nenhum outro período $k \in \delta(t)$ deste mesmo dia, o lado esquerdo é 1, logo $w_{st} = 1$.
\begin{equation}
\sum_{v \in E^s \cap E^t} q_{vt} - \sum_{k \in \delta(t)} \sum_{v \in E^s \cap E^k} q_{vk} = w_{st} + \beta_{st} \qquad \forall s \in S, t \in T
\end{equation}
\end{itemize}

\end{document}